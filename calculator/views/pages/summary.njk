{% extends "layouts/journey.njk" %}

{% from "govuk/components/panel/macro.njk" import govukPanel %}
{% from "govuk/components/tabs/macro.njk" import govukTabs %}
{% from "govuk/components/table/macro.njk" import govukTable %}
{% from "govuk/components/inset-text/macro.njk" import govukInsetText %}


{% block casaPageTitle %}
  {{ t('Summary:pageTitle') }}
{% endblock %}


{% block journey_form %}
    <h1 class="govuk-heading-l">
    {{ t('Your estimated emissions for 2024/25') }}
    </h1>

    {% set yearlyEmissions %}
    {{ govukPanel({
      class: "background-color: #1d70b8;",
      titleText: "Yearly Emissions",
      html: "Your total yearly emissions: <br>" + totalEmissions + " kg CO2e<br>Tea equivalent:<br>" + teaTotal + " cups of tea"
    }) }}

    {{ govukTable({
      caption: "Dates and amounts",
      captionClasses: "govuk-table__caption--m",
      firstCellIsHeader: true,
      head: [
        {
          text: "Source"
        },
        {
          text: "Emissions"
        },
        {
          text: "Percentage of total"
        },
        {
          text: "Score out of 4"
        }
      ],
      rows: [
        [
          {
            text: "Devices"
          },
          {
            text: deviceYearlyEmissions + " kg CO2e"
          },
          {
            text: devicePercentage + "%"
          },
          {
            text: deviceRating
          }
        ],
        [
          {
            text: "Messaging"
          },
          {
            text: messagingYearlyEmissions + " kg CO2e"
          },
          {
            text: messagingPercentage + "%"
          },
          {
            text: messagingRating
          }
        ],
        [
          {
            text: "Data Storage"
          },
          {
            text: dataStorageYearlyEmissions + " kg CO2e"
          },
          {
            text: dataStoragePercentage + "%"
          },
          {
            text: storageRating
          }
        ],
        [
          {
            text: "Travel"
          },
          {
            text: travelYearlyEmissions + " kg CO2e"
          },
          {
            text: travelPercentage + "%"
          },
          {
            text: travelRating
          }
        ]
      ]
    }) }}


    <img alt="persona image" src="{{src}}" width="200" height="240">

    <div id="persona-title" class="govuk-heading-m">
      <p>{{personaTitle}}</p>
    </div>
    <div id="persona-description" class="govuk-body">{{personaDescription}}</div>
    <div class="govuk-heading-s">How you can improve</div>
    <div id="persona-improvements" class="govuk-body">{{personaImprovements}}</div>


    {% endset %}

    {% set monthlyEmissions %}

    {% endset %}

    {{ govukTabs({
      items: [
        {
          label: "Yearly",
          id: "yearly",
          panel: {
            html: yearlyEmissions
          }
        },
        {
          label: "Monthly",
          id: "monthly",
          panel: {
            html: monthlyEmissions
          }
        }
      ]
    }) }}



{% endblock %}
